<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
    <script>
        window.onload = function () {
            setTimeout(function () {
                var resizeEvent = window.document.createEvent('UIEvents');
                resizeEvent.initUIEvent('resize', true, false, window, 0);
                window.dispatchEvent(resizeEvent);
            }, 3000);

            // Chuyển đổi ảnh mỗi 3 giây
            var currentImageIndex = 0;
            var images = [
                './media/image/cho-ben-thanh.jpg',
                './media/image/cho-ben-thanh2.jpg',
                './media/image/cho-ben-thanh3.jpg'
            ];
            var imageElement = document.getElementById('img1');

            // Khi marker được phát hiện, bắt đầu thay đổi ảnh
            var marker = document.getElementById('marker');
            marker.addEventListener('markerFound', function() {
                setInterval(function() {
                    currentImageIndex = (currentImageIndex + 1) % images.length; // Đảm bảo chỉ số không vượt quá số lượng ảnh
                    imageElement.setAttribute('src', images[currentImageIndex]);
                    console.log('Current Image: ' + images[currentImageIndex]); // Log ảnh hiện tại
                }, 3000); // Thay đổi mỗi 3 giây
            });
        };
    </script>
</head>

<body style="margin: 0px; overflow: hidden;">
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        <a-assets>
            <img id="image1" src="./media/image/cho-ben-thanh.jpg">
            <img id="image2" src="./media/image/cho-ben-thanh2.jpg">
            <img id="image3" src="./media/image/cho-ben-thanh3.jpg">
        </a-assets>
    
        <a-marker preset="custom" type="pattern" url="./marker/btn2-50.patt" id="marker">
            <!-- Hiển thị ảnh và Text -->
            <a-image id="img1" src="#image1" width="16" height="9" position="0 0 0" rotation="-90 0 0" scale="0.1 0.2 1" visible="true"></a-image>
            <a-text id="text1" value="Cho ben thanh" color="#FFFFFF" width="3" align="center" position="0 1.3 0" rotation="-90 0 0" visible="true"></a-text>
        </a-marker>
        
        <a-entity camera></a-entity>
    </a-scene>
</body>
</html>
